library(tidyverse)
library(magrittr)
library(knitr)
library(patchwork)
theme_set(theme_bw())
options(tinytex.verbose = TRUE)
anes <- read_csv("anes_pilot_2018.csv")
anes <- anes %>%
mutate(
voted_2016 = case_when(
turnout16 == 1 ~ 'Voted',
turnout16 == 2 ~ 'Did not Vote',
turnout16 == 3 & turnout16b == 1 ~ 'Voted',
turnout16 == 3 & turnout16b == 2 ~ 'Did not Vote'),
voted_2018 = case_when(
turnout18 %in% 1:3 ~ 'Voted',
turnout18 == 4 ~ 'Did not Vote',
turnout18 == 5 & turnout18ns == 1 ~ 'Voted',
turnout18 == 5 & turnout18ns == 2 ~ 'Did not Vote')
)
anes <- anes %>%
filter(
geangry  >= 0,
geafraid >= 0,
!is.na(voted_2016),
!is.na(voted_2018)
)
nrow_original = nrow(anes)
nrow_original
nrow_valid = nrow(anes)
nrow_valid
anes <- anes %>%
mutate(
emotions = case_when(
geafraid < geangry  ~ 'More Angry',
geafraid == geangry ~ 'No Difference',
geafraid > geangry  ~ 'More Afraid'),
new_voter = voted_2018 & !voted_2016)
anes <- anes %>%
mutate(
emotions = case_when(
geafraid < geangry  ~ 'More Angry',
geafraid == geangry ~ 'No Difference',
geafraid > geangry  ~ 'More Afraid'),
new_voter = voted_2018 && !voted_2016)
anes <- anes %>%
mutate(
emotions = case_when(
geafraid < geangry  ~ 'More Angry',
geafraid == geangry ~ 'No Difference',
geafraid > geangry  ~ 'More Afraid'),
new_voter = voted_2018 and !voted_2016)
anes$voted_2016 & anes$voted_2018
anes$voted_2016
summary(anes$voted_2016)
as.factor(anes$voted_2016)
anes <- anes %>%
mutate(
emotions = case_when(
geafraid < geangry  ~ 'More Angry',
geafraid == geangry ~ 'No Difference',
geafraid > geangry  ~ 'More Afraid'),
new_voter = voted_2018 == `Voted` & voted_2016 == 'Did not Vote)
anes <- anes %>%
mutate(
emotions = case_when(
geafraid < geangry  ~ 'More Angry',
geafraid == geangry ~ 'No Difference',
geafraid > geangry  ~ 'More Afraid'),
new_voter = voted_2018 == 'Voted' & voted_2016 == 'Did not Vote')
names(anes)
anes <- anes %>%
mutate(
emotions = case_when(
geafraid < geangry  ~ 'More Angry',
geafraid == geangry ~ 'No Difference',
geafraid > geangry  ~ 'More Afraid'),
new_voter = voted_2018 == 'Voted' & voted_2016 == 'Did not Vote' & birthyr < 1998)
more_angry_plot <- anes %>%
filter(
voted_2016 == 'Did not Vote',
voted_2018 == 'Voted') %>%
select(geangry, geafraid) %>%
ggplot() +
aes(x = emotions) +
geom_bar() +
labs(
x = NULL
)
more_angry_plot <- anes %>%
filter(
voted_2016 == 'Did not Vote',
voted_2018 == 'Voted') %>%
select(geangry, geafraid, emotions) %>%
ggplot() +
aes(x = emotions) +
geom_bar() +
labs(
x = NULL
)
attributes(test)
test
(test <- anes %>%
filter(
emotions == 'More Angry' | emotions == 'More Afraid')  %>%
mutate(
more_angry  = emotions == 'More Angry') %$%
t.test(new_voter ~ more_angry))
class(NA_character_)
anes <- anes %>%
mutate(
emotions = case_when(
geafraid < geangry  ~ 'More Angry',
geafraid == geangry ~ as.character(NA),
geafraid > geangry  ~ 'More Afraid'),
new_voter = voted_2018 == 'Voted' & voted_2016 == 'Did not Vote' & birthyr < 1998)
anes
View(anes)
View(anes)
anes$emotions
anes$emotions
levels(anes$emotions)
class(anes$emotions)
anes <- anes %>%
mutate(
emotions = case_when(
geafraid < geangry  ~ 'More Angry',
geafraid == geangry ~ NA_character_,
geafraid > geangry  ~ 'More Afraid'),
emotions = factor(emotions),
new_voter = voted_2018 == 'Voted' & voted_2016 == 'Did not Vote' & birthyr < 1998)
anes <- anes %>%
mutate(
emotions = case_when(
geafraid < geangry  ~ 'More Angry',
geafraid == geangry ~ NA_character_,
geafraid > geangry  ~ 'More Afraid'),
emotions = factor(emotions),
new_voter = voted_2018 == 'Voted' & voted_2016 == 'Did not Vote' & birthyr < 1998)
class(anes$emotions)
levels(anes$emotions)
test <- anes %>% t.test(new_voter ~ emotions)
library(tidyverse)
library(magrittr)
library(knitr)
library(patchwork)
library(moments)
theme_set(theme_bw())
options(tinytex.verbose = TRUE)
anes <- read_csv("anes_pilot_2018.csv")
nrow_original = nrow(anes)
anes <- anes %>%
mutate(
voted_2016 = case_when(
turnout16 == 1 ~ 'Voted',
turnout16 == 2 ~ 'Did not Vote',
turnout16 == 3 & turnout16b == 1 ~ 'Voted',
turnout16 == 3 & turnout16b == 2 ~ 'Did not Vote'),
voted_2018 = case_when(
turnout18 %in% 1:3 ~ 'Voted',
turnout18 == 4 ~ 'Did not Vote',
turnout18 == 5 & turnout18ns == 1 ~ 'Voted',
turnout18 == 5 & turnout18ns == 2 ~ 'Did not Vote')
)
anes <- anes %>%
filter(
geangry  >= 0,
geafraid >= 0,
!is.na(voted_2016),
!is.na(voted_2018)
)
nrow_valid = nrow(anes)
anes <- anes %>%
mutate(
emotions = case_when(
geafraid < geangry  ~ 'More Angry',
geafraid == geangry ~ NA_character_,
geafraid > geangry  ~ 'More Afraid'),
emotions = factor(emotions),
new_voter = voted_2018 == 'Voted' & voted_2016 == 'Did not Vote' & birthyr < 1998)
summary_table <- anes %>%
mutate(
print_vote_2016 = case_when(
voted_2016 == 'Voted' ~ 'Voted 2016',
voted_2016 == 'Did not Vote' ~ 'Did not Vote 2016'),
print_vote_2018 = case_when(
voted_2018 == 'Voted' ~ 'Voted 2018',
voted_2018 == 'Did not Vote' ~ 'Did not Vote 2018')) %$%
prop.table(
table(
print_vote_2016,
print_vote_2018))
kable(
summary_table,
digits = 2,
caption = 'Cross Tab of Self Reported Voting in 2016 and 2018',
booktabs = TRUE,
)
fear_anger <- anes %>%
filter(voted_2016 == 'Did not Vote') %>%
ggplot(aes(x = geangry, y = geafraid, color = voted_2018)) +
geom_jitter() +
stat_smooth(method = 'lm') +
labs(
x = 'Anger', y = 'Fear', color = 'Voted in 2018?',
title = 'Fear and Anger in 2018') +
theme(legend.position = 'bottom', legend.box = 'horizontal')
describe_fear_anger <- anes %>%
filter(
voted_2016 == 'Did not Vote',
voted_2018 == 'Voted') %>%
select(geangry, geafraid) %>%
pivot_longer(cols = c(geangry, geafraid)) %>%
mutate(
name = case_when(
name == 'geafraid' ~ 'Fear',
name == 'geangry' ~ 'Anger')) %>%
ggplot(aes(x = value, fill = name)) +
geom_bar(position = 'dodge') +
labs(
x = "Respondent's Feelings",
y = 'Density',
fill = 'Fear or Anger') +
theme(legend.position = 'bottom', legend.box = 'horizontal')
more_angry_plot <- anes %>%
filter(
voted_2016 == 'Did not Vote',
voted_2018 == 'Voted') %>%
select(geangry, geafraid, emotions) %>%
ggplot() +
aes(x = emotions) +
geom_bar() +
labs(
x = NULL
)
(fear_anger) | (describe_fear_anger /
more_angry_plot )
summary(anes$emotions)
t.test(new_voter ~ emotions)
anes %>% t.test(new_voter ~ emotions)
rlang::last_error()
test <- anes %>% t.test(new_voter ~ as.boolean(emotions))
test <- anes %>% t.test(new_voter ~ as.numeric(emotions))
as.numeric(anes$emotions)
test <- t.test(anes$new_voter ~ as.numeric(anes$emotions))
more_angry_plot <- anes %>%
filter(
voted_2016 == 'Did not Vote',
voted_2018 == 'Voted') %>%
select(new_voter, emotions) %>%
ggplot() +
aes(x = emotions, fill = new_voter) +
geom_bar() +
labs(
x = NULL
)
(fear_anger) | (describe_fear_anger /
more_angry_plot )
more_angry_plot <- anes %>%
select(new_voter, emotions) %>%
ggplot() +
aes(x = emotions, y = new_voter) +
geom_bar() +
labs(
x = NULL
)
(fear_anger) | (describe_fear_anger /
more_angry_plot )
more_angry_plot <- anes %>%
select(new_voter, emotions) %>%
ggplot() +
aes(x = emotions, y = new_voter) +
geom_bar() +
labs(
x = NULL
)
(fear_anger) | (describe_fear_anger /
more_angry_plot )
more_angry_plot <- anes %>%
select(new_voter, emotions) %>%
ggplot() +
aes(x = emotions, y = new_voter) +
geom_bar(stat="identity") +
labs(
x = NULL,
y = 'Proportion of New Voters'
)
(fear_anger) | (describe_fear_anger /
more_angry_plot )
more_angry_plot <- anes %>%
select(new_voter, emotions) %>%
mutate(emotions_pretty =
case_when(
emotions == 'More Angry' ~ 'More Anger',
emotions == 'More Afraid' ~ 'More Fear',
T ~ 'Equal Emotion'
)
) %>%
ggplot() +
aes(x = emotions, y = new_voter) +
geom_bar(stat="identity") +
labs(
x = NULL,
y = 'Proportion of New Voters'
)
(fear_anger) | (describe_fear_anger /
more_angry_plot )
more_angry_plot <- anes %>%
select(new_voter, emotions) %>%
mutate(emotions_pretty =
case_when(
emotions == 'More Angry' ~ 'More Anger',
emotions == 'More Afraid' ~ 'More Fear',
T ~ 'Equal Emotion'
)
) %>%
ggplot() +
aes(x = emotions_pretty, y = new_voter) +
geom_bar(stat="identity") +
labs(
x = NULL,
y = 'Proportion of New Voters'
)
(fear_anger) | (describe_fear_anger /
more_angry_plot )
more_angry_plot <- anes %>%
select(new_voter, emotions) %>%
mutate(emotions_pretty =
case_when(
emotions == 'More Angry' ~ 'More Anger',
emotions == 'More Afraid' ~ 'More Fear',
T ~ 'Equal Emotion'
)
emotions_pretty = factor(emotions_pretty, levels = c('More Anger', 'Equal Emotion','More Fear'))
more_angry_plot <- anes %>%
select(new_voter, emotions) %>%
mutate(emotions_pretty =
case_when(
emotions == 'More Angry' ~ 'More Anger',
emotions == 'More Afraid' ~ 'More Fear',
T ~ 'Equal Emotion'
),
emotions_pretty = factor(emotions_pretty, levels = c('More Anger', 'Equal Emotion','More Fear'))
) %>%
ggplot() +
aes(x = emotions_pretty, y = new_voter) +
geom_bar(stat="identity") +
labs(
x = NULL,
y = 'Proportion of New Voters'
)
(fear_anger) | (describe_fear_anger /
more_angry_plot )
more_angry_plot <- anes %>%
select(new_voter, emotions) %>%
mutate(emotions_pretty =
case_when(
emotions == 'More Angry' ~ 'More Anger',
emotions == 'More Afraid' ~ 'More Fear',
T ~ 'Equal Emotion'
),
emotions_pretty = factor(emotions_pretty, levels = c('More Anger', 'Equal Emotion','More Fear'))
) %>%
ggplot() +
aes(x = emotions_pretty, y = new_voter) +
geom_bar(stat="identity") +
labs(
x = NULL,
y = 'Fraction of New Voters'
)
(fear_anger) | (describe_fear_anger /
more_angry_plot )
describe_fear_anger | more_angry_plot
describe_fear_anger | more_angry_plot
describe_fear_anger | more_angry_plot
describe_fear_anger | more_angry_plot
more_angry_plot <- anes %>%
select(new_voter, emotions) %>%
mutate(emotions_pretty =
case_when(
emotions == 'More Angry' ~ 'More Anger',
emotions == 'More Afraid' ~ 'More Fear',
T ~ 'Equal Emotion'
),
emotions_pretty = factor(emotions_pretty, levels = c('More Anger', 'Equal Emotion','More Fear'))
) %>%
ggplot() +
aes(x = emotions_pretty, y = new_voter) +
geom_bar(stat="identity") +
labs(
x = NULL,
y = 'Fraction Voting for First Time'
) +
scale_y_continuous(name="Fraction Voting for First Time")
describe_fear_anger | more_angry_plot
more_angry_plot <- anes %>%
select(new_voter, emotions) %>%
mutate(emotions_pretty =
case_when(
emotions == 'More Angry' ~ 'More Anger',
emotions == 'More Afraid' ~ 'More Fear',
T ~ 'Equal Emotion'
),
emotions_pretty = factor(emotions_pretty, levels = c('More Anger', 'Equal Emotion','More Fear'))
) %>%
ggplot() +
aes(x = emotions_pretty, y = new_voter) +
geom_bar(stat="identity") +
labs(
x = NULL,
y = 'Fraction Voting for First Time'
) +
scale_y_discrete(name="Fraction Voting for First Time")
describe_fear_anger | more_angry_plot
